<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M&E Im√≥veis</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,200;0,300;0,400;1,200;1,300;1,400&family=Syne:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#1565C0;--gold2:#1976D2;--gold3:#0D47A1;
  --bg:#F8FAFC;--bg2:#FFFFFF;--bg3:#F1F5F9;--bg4:#E8EEF5;
  --border:#E2E8F0;--border2:#CBD5E1;
  --text:#1E293B;--mid:#64748B;--muted:#94A3B8;
  --white:#1E293B;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Syne',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;-webkit-font-smoothing:antialiased}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--gold)}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header{background:rgba(255,255,255,.97);padding:0 52px;box-shadow:0 1px 12px rgba(0,0,0,.08);height:68px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:200;border-bottom:1px solid var(--border);backdrop-filter:blur(12px);}
.logo{display:flex;align-items:baseline;gap:2px}
.logo-main{font-family:'Fraunces',serif;color:var(--gold);font-size:1.55rem;font-weight:300;letter-spacing:3px}
.logo-sub{font-size:.6rem;letter-spacing:5px;color:var(--mid);font-weight:400;text-transform:uppercase;margin-left:12px;padding-bottom:2px}
.header-right{display:flex;align-items:center;gap:12px}
.header-wpp{display:flex;align-items:center;gap:8px;background:var(--gold);color:var(--bg);padding:9px 20px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;text-decoration:none;cursor:pointer;transition:all .25s;border:none;}
.header-wpp:hover{background:var(--gold2)}
.header-wpp svg{width:14px;height:14px;flex-shrink:0}
.header-contato-btn{background:none;border:1px solid var(--border2);color:var(--mid);padding:9px 16px;font-family:'Syne',sans-serif;font-size:.65rem;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s;}
.header-contato-btn:hover{border-color:var(--gold3);color:var(--gold)}

/* ‚îÄ‚îÄ HERO COMPACTO ‚îÄ‚îÄ */
.hero{position:relative;background:linear-gradient(135deg,#EFF6FF 0%,#DBEAFE 60%,#EFF6FF 100%);overflow:hidden;padding:44px 52px 52px;}
.hero-grid-lines{position:absolute;inset:0;background-image:linear-gradient(rgba(21,101,192,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(21,101,192,.04) 1px,transparent 1px);background-size:80px 80px;pointer-events:none;}
.hero-glow{position:absolute;top:-30%;right:-5%;width:50vw;height:140%;background:radial-gradient(ellipse at center,rgba(21,101,192,.07) 0%,transparent 65%);pointer-events:none;}
.hero-content{position:relative;z-index:2;max-width:780px;margin:0 auto;text-align:center;}
.hero-eyebrow{display:inline-flex;align-items:center;gap:10px;font-size:.6rem;letter-spacing:5px;text-transform:uppercase;color:#1565C0;font-weight:700;margin-bottom:20px;}
.hero h1{font-family:'Fraunces',serif;font-size:clamp(2.2rem,5vw,3.8rem);font-weight:200;line-height:1.1;color:#0F172A;margin-bottom:8px;letter-spacing:-1.5px;}
.hero h1 em{font-style:italic;color:var(--gold);}
.hero-sub{font-size:.85rem;color:var(--mid);line-height:1.8;margin-bottom:32px;letter-spacing:.2px}

/* Busca hero integrada */
.hero-search{background:#fff;border:1px solid var(--border2);display:flex;align-items:center;gap:0;box-shadow:0 4px 24px rgba(21,101,192,.1);max-width:700px;margin:0 auto 36px;}
.hero-search-icon{padding:0 16px;color:var(--mid);font-size:1rem;flex-shrink:0}
.hero-search-input{flex:1;background:none;border:none;color:var(--text);padding:16px 0;font-family:'Syne',sans-serif;font-size:.9rem;outline:none;}
.hero-search-input::placeholder{color:var(--muted)}
.hero-search-sep{width:1px;height:36px;background:var(--border);flex-shrink:0}
.hero-search-select{background:none;border:none;color:var(--mid);padding:16px 14px;font-family:'Syne',sans-serif;font-size:.78rem;outline:none;cursor:pointer;}
.hero-search-btn{background:var(--gold);color:#fff;border:none;padding:16px 24px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;white-space:nowrap;flex-shrink:0;transition:background .2s;}
.hero-search-btn:hover{background:var(--gold2)}

/* Stats hero */
.hero-stats{display:flex;gap:0;justify-content:center;border-top:1px solid var(--border2);padding-top:28px;margin-top:0;}
.hero-stat{text-align:center;padding:0 32px;border-right:1px solid var(--border2);}
.hero-stat:last-child{border-right:none}
.stat-num{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:300;color:#0F172A;line-height:1;display:block}
.stat-label{font-size:.6rem;letter-spacing:3px;text-transform:uppercase;color:var(--mid);margin-top:4px;display:block}

/* ‚îÄ‚îÄ CARROSSEL DE DESTAQUES ‚îÄ‚îÄ */
.destaques-section{background:#fff;border-bottom:1px solid var(--border);padding:28px 0 0;}
.destaques-header{display:flex;align-items:center;justify-content:space-between;padding:0 52px;margin-bottom:20px;}
.destaques-titulo{font-family:'Fraunces',serif;font-size:1.3rem;font-weight:300;color:#0F172A;letter-spacing:-.5px}
.destaques-titulo span{color:var(--gold);font-style:italic}
.destaques-ver-todos{font-size:.65rem;letter-spacing:2px;text-transform:uppercase;color:var(--gold);cursor:pointer;background:none;border:none;font-family:'Syne',sans-serif;font-weight:600;}
.carrossel-wrap{position:relative;}
.carrossel{display:flex;gap:16px;overflow-x:auto;padding:0 52px 24px;scroll-snap-type:x mandatory;scrollbar-width:none;-ms-overflow-style:none;}
.carrossel::-webkit-scrollbar{display:none}
.carrossel-card{flex:0 0 300px;background:var(--bg2);border:1px solid var(--border);cursor:pointer;scroll-snap-align:start;transition:transform .3s,box-shadow .3s;position:relative;overflow:hidden;}
.carrossel-card:hover{transform:translateY(-4px);box-shadow:0 12px 36px rgba(21,101,192,.12);}
.carrossel-img{height:180px;overflow:hidden;background:var(--bg3);position:relative;}
.carrossel-img img{width:100%;height:100%;object-fit:cover;transition:transform .5s;}
.carrossel-card:hover .carrossel-img img{transform:scale(1.06)}
.carrossel-img-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:var(--muted);}
.carrossel-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.6) 0%,transparent 60%)}
.carrossel-badge{position:absolute;top:0;left:0;background:var(--gold);color:#fff;font-size:.55rem;padding:4px 10px;letter-spacing:2px;text-transform:uppercase;font-weight:700;z-index:2}
.carrossel-tag{position:absolute;top:0;right:0;font-size:.55rem;padding:4px 10px;letter-spacing:2px;text-transform:uppercase;font-weight:700;z-index:2}
.carrossel-tag.novo{background:#1a6b3a;color:#7effc0}
.carrossel-tag.oportunidade{background:#7a3a00;color:#ffbe6b}
.carrossel-tag.destaque{background:#3a1a6b;color:#c9b0ff}
.carrossel-body{padding:16px 18px 18px}
.carrossel-price{font-family:'Fraunces',serif;font-size:1.35rem;font-weight:300;color:#0F172A;letter-spacing:-.5px;margin-bottom:4px;}
.carrossel-title{font-size:.65rem;font-weight:600;color:var(--gold);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:6px;}
.carrossel-local{font-size:.68rem;color:var(--mid);}
.carrossel-arrow{position:absolute;top:50%;transform:translateY(-60%);background:rgba(255,255,255,.95);border:1px solid var(--border2);width:38px;height:38px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;font-size:1rem;color:var(--text);transition:all .2s;box-shadow:0 2px 12px rgba(0,0,0,.1);}
.carrossel-arrow:hover{background:var(--gold);color:#fff;border-color:var(--gold)}
.carrossel-arrow.left{left:12px}
.carrossel-arrow.right{right:12px}

/* ‚îÄ‚îÄ SEARCH BAR ‚îÄ‚îÄ */
.search-bar{background:#fff;border-bottom:1px solid var(--border);padding:16px 52px;display:flex;gap:12px;align-items:center;flex-wrap:wrap;box-shadow:0 1px 4px rgba(0,0,0,.04);}
.search-input-wrap{flex:1;min-width:200px;position:relative;}
.search-input{width:100%;background:#F8FAFC;border:1px solid var(--border);color:var(--text);padding:10px 16px 10px 40px;font-family:'Syne',sans-serif;font-size:.78rem;outline:none;transition:border-color .2s;}
.search-input:focus{border-color:var(--gold3)}
.search-input::placeholder{color:var(--mid)}
.search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--mid);font-size:.85rem;pointer-events:none;}
.price-select{background:#F8FAFC;border:1px solid var(--border);color:var(--mid);padding:10px 14px;font-family:'Syne',sans-serif;font-size:.72rem;outline:none;cursor:pointer;transition:border-color .2s;letter-spacing:.5px;}
.price-select:focus{border-color:var(--gold3)}
.price-select option{background:#fff}

/* ‚îÄ‚îÄ FILTROS ‚îÄ‚îÄ */
.filters-bar{background:#fff;border-bottom:1px solid var(--border);padding:0 52px;display:flex;align-items:center;justify-content:space-between;gap:12px;}
.filters-left{display:flex;align-items:center;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none;flex:1;}
.filters-left::-webkit-scrollbar{display:none}
.filter-btn{background:none;border:none;border-bottom:2px solid transparent;color:var(--mid);padding:20px 22px;cursor:pointer;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:600;letter-spacing:3px;text-transform:uppercase;transition:all .2s;white-space:nowrap;flex-shrink:0;}
.filter-btn:hover{color:var(--text)}
.filter-btn.active{color:var(--gold);border-bottom-color:var(--gold)}
.filters-right{display:flex;align-items:center;gap:12px;flex-shrink:0;}
.filters-count{font-size:.68rem;letter-spacing:2px;color:var(--muted);white-space:nowrap}
.btn-nao-achei{background:none;border:1px solid var(--border2);color:var(--gold);padding:8px 14px;font-family:'Syne',sans-serif;font-size:.65rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:all .2s;white-space:nowrap;}
.btn-nao-achei:hover{border-color:var(--gold);background:rgba(21,101,192,.06)}
.modal-busca-box{background:#fff;border:1px solid var(--border);padding:32px;width:90%;max-width:500px;position:relative;animation:fadeUp .3s ease;max-height:90vh;overflow-y:auto;box-shadow:0 24px 80px rgba(0,0,0,.15);}

/* ‚îÄ‚îÄ GRID ‚îÄ‚îÄ */
.section{padding:52px;max-width:1500px;margin:0 auto;background:var(--bg)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:16px;background:transparent;}
.card{background:var(--bg2);cursor:pointer;transition:transform .4s cubic-bezier(.25,.46,.45,.94),box-shadow .4s;animation:fadeUp .5s ease both;position:relative;overflow:hidden;border:1px solid var(--border);}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.card:hover{transform:translateY(-6px);box-shadow:0 16px 48px rgba(21,101,192,.12);z-index:2;background:var(--bg3)}
.card-img-wrap{position:relative;height:260px;overflow:hidden;background:var(--bg3)}
.card-img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .7s cubic-bezier(.25,.46,.45,.94)}
.card:hover .card-img{transform:scale(1.08)}
.card-img-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:3rem;color:var(--muted)}
.card-img-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.75) 0%,rgba(0,0,0,.1) 50%,transparent 100%)}
.card-badge{position:absolute;top:0;left:0;background:var(--gold);color:var(--bg);font-size:.6rem;padding:5px 12px;letter-spacing:2.5px;text-transform:uppercase;font-weight:700;z-index:2;}
.card-tag{position:absolute;top:0;right:0;font-size:.6rem;padding:5px 12px;letter-spacing:2px;text-transform:uppercase;font-weight:700;z-index:2;}
.card-tag.novo{background:#1a6b3a;color:#7effc0}
.card-tag.oportunidade{background:#7a3a00;color:#ffbe6b}
.card-tag.destaque{background:#3a1a6b;color:#c9b0ff}
.card-foto-count{position:absolute;bottom:12px;right:12px;background:rgba(0,0,0,.75);color:rgba(255,255,255,.7);font-size:.65rem;padding:3px 9px;letter-spacing:1px;z-index:2;border:1px solid rgba(255,255,255,.1)}
.card-del{position:absolute;top:36px;right:0;background:rgba(120,20,20,.95);color:white;border:none;width:32px;height:32px;cursor:pointer;font-size:.8rem;display:none;align-items:center;justify-content:center;z-index:3;transition:background .2s}
.card-del:hover{background:#900}
.admin-mode .card-del{display:flex}
.card-body{padding:22px 24px 6px}
.card-price{font-family:'Fraunces',serif;font-size:1.7rem;font-weight:300;color:#0F172A;margin-bottom:6px;letter-spacing:-1px;line-height:1}
.card-title{font-size:.72rem;font-weight:600;color:var(--gold);margin-bottom:8px;letter-spacing:2px;text-transform:uppercase}
.card-location{font-size:.73rem;color:var(--mid);margin-bottom:10px;display:flex;align-items:center;gap:5px}
.card-desc{font-size:.77rem;color:#4A4540;line-height:1.7;margin-bottom:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.card-features{display:flex;gap:0;font-size:.68rem;color:var(--mid);border-top:1px solid var(--border);margin-top:14px;}
.card-feat{padding:10px 0;padding-right:16px;display:flex;align-items:center;gap:5px;letter-spacing:.5px}
.card-feat:not(:last-child){border-right:1px solid var(--border);margin-right:16px}
.card-admin-btns{display:none;border-top:1px solid var(--border)}
.admin-mode .card-admin-btns{display:flex}
.card-btn-edit{flex:1;background:rgba(197,165,90,.12);color:var(--gold);border:none;border-right:1px solid var(--border);padding:12px;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s}
.card-btn-edit:hover{background:var(--gold);color:var(--bg)}
.card-btn-del{flex:1;background:rgba(120,20,20,.12);color:#c44;border:none;padding:12px;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s}
.card-btn-del:hover{background:#8B2020;color:white}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(15,23,42,.75);z-index:1000;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(8px)}
.modal-overlay.open{display:flex;animation:fadeIn .2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{background:#fff;max-width:800px;width:100%;max-height:92vh;overflow-y:auto;position:relative;animation:slideUp .3s ease;border:1px solid var(--border);box-shadow:0 24px 80px rgba(0,0,0,.15)}
@keyframes slideUp{from{transform:translateY(24px);opacity:0}to{transform:translateY(0);opacity:1}}
.modal-close{position:absolute;top:14px;right:14px;background:#fff;color:#64748B;border:1px solid var(--border);width:36px;height:36px;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center;font-size:.9rem;transition:all .2s;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.modal-close:hover{background:var(--gold);color:var(--bg);border-color:var(--gold)}
.galeria{position:relative;height:360px;background:var(--bg);overflow:hidden}
.galeria-img{width:100%;height:360px;object-fit:cover;display:none}
.galeria-img.ativo{display:block;animation:fadeIn .3s ease}
.galeria-placeholder{width:100%;height:360px;background:var(--bg3);display:flex;align-items:center;justify-content:center;font-size:5rem;color:var(--muted)}
.galeria-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.7);color:white;border:1px solid rgba(255,255,255,.1);width:44px;height:44px;font-size:1.2rem;cursor:pointer;z-index:5;transition:all .2s;display:flex;align-items:center;justify-content:center}
.galeria-btn:hover{background:var(--gold);color:var(--bg);border-color:var(--gold)}
.galeria-prev{left:14px}.galeria-next{right:14px}
.galeria-dots{position:absolute;bottom:14px;left:50%;transform:translateX(-50%);display:flex;gap:6px;z-index:5}
.galeria-dot{width:5px;height:5px;border-radius:50%;background:rgba(255,255,255,.3);cursor:pointer;transition:all .25s;border:none}
.galeria-dot.ativo{background:var(--gold);width:18px;border-radius:3px}
.galeria-counter{position:absolute;top:14px;left:14px;background:rgba(0,0,0,.7);color:rgba(255,255,255,.7);font-size:.65rem;padding:4px 10px;letter-spacing:1.5px;z-index:5;border:1px solid rgba(255,255,255,.08)}
.modal-body{padding:30px 34px 34px}
.modal-badge{display:inline-block;background:var(--gold);color:var(--bg);font-size:.6rem;padding:4px 12px;letter-spacing:2.5px;text-transform:uppercase;font-weight:700;margin-bottom:14px}
.modal-tag-inline{display:inline-block;font-size:.6rem;padding:4px 10px;letter-spacing:2px;text-transform:uppercase;font-weight:700;margin-bottom:14px;margin-left:6px}
.modal-tag-inline.novo{background:#1a6b3a;color:#7effc0}
.modal-tag-inline.oportunidade{background:#7a3a00;color:#ffbe6b}
.modal-tag-inline.destaque{background:#3a1a6b;color:#c9b0ff}
.modal-price{font-family:'Fraunces',serif;font-size:2.6rem;color:#0F172A;margin-bottom:6px;font-weight:200;letter-spacing:-1.5px;line-height:1}
.modal-title{font-size:.78rem;font-weight:600;color:var(--gold);margin-bottom:8px;letter-spacing:2px;text-transform:uppercase}
.modal-location{font-size:.82rem;color:var(--mid);margin-bottom:24px}
.modal-features{display:flex;flex-wrap:wrap;gap:0;padding:16px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-bottom:22px}
.modal-features span{font-size:.75rem;color:var(--mid);padding-right:20px;margin-right:20px;border-right:1px solid var(--border);letter-spacing:.5px}
.modal-features span:last-child{border-right:none}
.modal-desc{font-size:.86rem;color:var(--mid);line-height:1.95;margin-bottom:28px;font-weight:400}
.modal-actions{display:flex;gap:10px;margin-bottom:0}
.btn-whatsapp{display:flex;align-items:center;justify-content:center;gap:10px;background:#128C46;color:var(--white);text-decoration:none;padding:17px 28px;font-family:'Syne',sans-serif;font-size:.75rem;font-weight:700;flex:1;letter-spacing:3px;text-transform:uppercase;transition:background .2s}
.btn-whatsapp:hover{background:#0a7a3a}
.btn-share{display:flex;align-items:center;justify-content:center;gap:8px;background:var(--bg3);color:var(--gold);border:1px solid var(--border2);padding:17px 20px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s;white-space:nowrap;}
.btn-share:hover{background:var(--gold);color:var(--bg);border-color:var(--gold)}

/* ‚îÄ‚îÄ P√ÅGINA CONTATO ‚îÄ‚îÄ */
.contato-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:1500;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(8px)}
.contato-overlay.open{display:flex;animation:fadeIn .2s ease}
.contato-box{background:var(--bg2);max-width:560px;width:100%;border:1px solid var(--border2);animation:slideUp .3s ease;position:relative;}
.contato-close{position:absolute;top:14px;right:14px;background:rgba(0,0,0,.7);color:var(--text);border:1px solid var(--border2);width:36px;height:36px;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center;font-size:.9rem;transition:all .2s}
.contato-close:hover{background:var(--gold);color:var(--bg)}
.contato-header{padding:32px 34px 24px;border-bottom:1px solid var(--border)}
.contato-header h2{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:200;color:var(--white);letter-spacing:-0.5px}
.contato-header p{font-size:.78rem;color:var(--mid);margin-top:6px;letter-spacing:.3px}
.contato-body{padding:28px 34px 34px;display:flex;flex-direction:column;gap:16px}
.contato-item{display:flex;align-items:center;gap:16px;padding:16px;background:var(--bg3);border:1px solid var(--border);text-decoration:none;transition:border-color .2s;}
.contato-item:hover{border-color:var(--gold3)}
.contato-icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}
.contato-info{flex:1}
.contato-label{font-size:.6rem;letter-spacing:3px;text-transform:uppercase;color:var(--mid);display:block;margin-bottom:3px}
.contato-value{font-size:.9rem;color:var(--text);font-weight:500}

/* ‚îÄ‚îÄ SENHA ‚îÄ‚îÄ */
.senha-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.96);z-index:3000;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(12px)}
.senha-overlay.open{display:flex}
.senha-box{background:var(--bg2);max-width:380px;width:100%;border:1px solid var(--border2);padding:40px 36px;text-align:center;}
.senha-box h3{font-family:'Fraunces',serif;font-size:1.6rem;font-weight:200;color:var(--white);margin-bottom:8px;letter-spacing:-0.5px}
.senha-box p{font-size:.75rem;color:var(--mid);margin-bottom:28px;letter-spacing:.3px}
.senha-input{width:100%;background:var(--bg3);border:1px solid var(--border2);color:var(--text);padding:13px 16px;font-family:'Syne',sans-serif;font-size:.9rem;outline:none;text-align:center;letter-spacing:4px;margin-bottom:12px;transition:border-color .2s;}
.senha-input:focus{border-color:var(--gold3)}
.senha-btn{width:100%;background:var(--gold);color:var(--bg);border:none;padding:13px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s;margin-bottom:8px}
.senha-btn:hover{background:var(--gold2)}
.senha-erro{font-size:.72rem;color:#c44;letter-spacing:.5px;min-height:20px;margin-top:4px}
.senha-cancel{background:none;border:none;color:var(--mid);font-family:'Syne',sans-serif;font-size:.65rem;cursor:pointer;letter-spacing:1px;text-transform:uppercase;margin-top:8px;transition:color .2s}
.senha-cancel:hover{color:var(--text)}

/* ‚îÄ‚îÄ ADMIN ‚îÄ‚îÄ */
.admin-toggle{position:fixed;bottom:28px;right:28px;background:var(--bg3);color:var(--gold);border:1px solid var(--gold3);padding:11px 20px;font-family:'Syne',sans-serif;font-size:.65rem;font-weight:600;cursor:pointer;letter-spacing:2px;text-transform:uppercase;z-index:500;transition:all .2s;}
.admin-toggle:hover{background:var(--gold);color:var(--bg)}
.admin-mode .admin-toggle{display:none}
.admin-bar{display:none;position:fixed;bottom:0;left:0;right:0;background:rgba(12,12,12,.97);border-top:1px solid var(--border2);padding:14px 32px;z-index:500;align-items:center;justify-content:space-between;gap:12px;backdrop-filter:blur(12px);}
.admin-bar::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
.admin-bar.open{display:flex}
.admin-bar-label{color:var(--gold);font-size:.65rem;letter-spacing:2.5px;text-transform:uppercase;font-weight:600}
.admin-bar-label span{color:var(--mid);font-weight:400;font-size:.62rem;display:block;letter-spacing:.5px;text-transform:none;margin-top:3px}
.admin-bar-btns{display:flex;gap:8px}
.btn-admin-add{background:var(--gold);color:var(--bg);border:none;padding:10px 22px;font-family:'Syne',sans-serif;font-size:.65rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s}
.btn-admin-add:hover{background:var(--gold2)}
.btn-admin-exit{background:none;border:1px solid var(--border2);color:var(--mid);padding:10px 16px;font-family:'Syne',sans-serif;font-size:.65rem;cursor:pointer;letter-spacing:1.5px;text-transform:uppercase;transition:all .2s}
.btn-admin-exit:hover{border-color:var(--mid);color:var(--text)}
body.admin-mode{padding-bottom:70px}
.admin-panel{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:2000;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(8px)}
.admin-panel.open{display:flex}
.admin-box{background:var(--bg2);width:100%;max-width:640px;max-height:92vh;overflow-y:auto;border:1px solid var(--border2)}
.btn-ia-preencher{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;border:none;padding:10px 18px;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s;margin-top:6px}
.btn-ia-preencher:hover{opacity:.85;transform:translateY(-1px)}
.ia-panel{background:rgba(79,70,229,.07);border:1px solid rgba(79,70,229,.3);padding:18px;margin-bottom:20px}
.ia-panel-label{font-size:.68rem;color:#a5b4fc;letter-spacing:1px;margin-bottom:10px;font-weight:600}
.ia-textarea{width:100%;background:var(--bg);border:1px solid rgba(79,70,229,.3);color:var(--text);padding:12px;font-family:'Syne',sans-serif;font-size:.82rem;outline:none;height:140px;resize:vertical;line-height:1.6}
.ia-textarea:focus{border-color:#7c3aed}
.btn-ia-processar{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;border:none;padding:12px 20px;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s;flex:1}
.btn-ia-processar:hover{opacity:.85}
.btn-ia-processar:disabled{opacity:.5;cursor:not-allowed}
.btn-ia-cancelar{background:none;border:1px solid var(--border2);color:var(--mid);padding:12px 16px;font-family:'Syne',sans-serif;font-size:.68rem;cursor:pointer;letter-spacing:1.5px;text-transform:uppercase;transition:all .2s}
.btn-ia-cancelar:hover{border-color:var(--mid);color:var(--text)}
.admin-box-header{padding:26px 30px 22px;border-bottom:1px solid var(--border);position:relative;display:flex;flex-direction:column;gap:4px}
.admin-box-header::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1px;background:linear-gradient(90deg,var(--gold3),transparent)}
.admin-box h2{font-family:'Fraunces',serif;font-size:1.5rem;font-weight:300;color:var(--white);letter-spacing:-0.5px}
.admin-box-body{padding:24px 30px 28px}
.edit-indicator{background:rgba(197,165,90,.07);border-left:2px solid var(--gold);padding:10px 14px;font-size:.72rem;color:var(--gold);margin-bottom:20px;letter-spacing:.5px}
.form-group{margin-bottom:16px}
.form-group label{display:block;font-size:.62rem;letter-spacing:2.5px;text-transform:uppercase;color:var(--mid);margin-bottom:6px;font-weight:600}
.form-group input,.form-group textarea,.form-group select{width:100%;border:1px solid var(--border2);padding:11px 14px;font-family:'Syne',sans-serif;font-size:.85rem;outline:none;transition:border-color .2s;background:var(--bg3);color:var(--text)}
.form-group input:focus,.form-group textarea:focus,.form-group select:focus{border-color:var(--gold3)}
.form-group select option{background:var(--bg3)}
.form-group textarea{height:90px;resize:vertical}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.fotos-lista{display:flex;flex-direction:column;gap:8px;margin-top:8px}
/* ‚îÄ‚îÄ UPLOAD DE FOTOS ‚îÄ‚îÄ */
.upload-area{border:2px dashed var(--border2);background:var(--bg3);padding:32px 20px;text-align:center;cursor:pointer;transition:all .25s;margin-bottom:12px;user-select:none}
.upload-area:hover,.upload-area.dragover{border-color:var(--gold3);background:rgba(197,165,90,.06)}
.upload-icon{font-size:2rem;margin-bottom:8px}
.upload-text{font-size:.78rem;color:var(--text);font-weight:600;letter-spacing:.5px}
.upload-sub{font-size:.68rem;color:var(--mid);margin-top:4px;letter-spacing:.5px}
.fotos-preview{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:8px;margin-bottom:8px}
.preview-item{position:relative;aspect-ratio:1;background:var(--bg3);overflow:hidden}
.preview-item img{width:100%;height:100%;object-fit:cover;display:block}
.preview-remove{position:absolute;top:3px;right:3px;background:rgba(0,0,0,.8);color:#fff;border:none;width:20px;height:20px;border-radius:50%;cursor:pointer;font-size:.7rem;display:flex;align-items:center;justify-content:center}
.preview-remove:hover{background:#900}
.preview-principal{position:absolute;bottom:0;left:0;right:0;background:rgba(197,165,90,.9);color:#000;font-size:.55rem;font-weight:700;letter-spacing:1px;text-align:center;padding:2px;text-transform:uppercase}
.foto-item{display:flex;gap:8px;align-items:center}.foto-item input{flex:1}
.foto-item button{background:rgba(120,20,20,.2);color:#c44;border:1px solid rgba(120,20,20,.3);width:36px;height:40px;cursor:pointer;font-size:.82rem;flex-shrink:0;transition:all .2s}
.foto-item button:hover{background:#8B2020;color:white;border-color:#8B2020}
.btn-add-foto{background:none;border:1px dashed var(--border2);color:var(--mid);padding:9px;font-family:'Syne',sans-serif;font-size:.68rem;cursor:pointer;width:100%;margin-top:6px;letter-spacing:1.5px;text-transform:uppercase;transition:all .2s}
.btn-add-foto:hover{border-color:var(--gold3);color:var(--gold)}
.btn-salvar-form{background:var(--gold);color:var(--bg);border:none;padding:14px 24px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;width:100%;margin-top:12px;letter-spacing:2.5px;text-transform:uppercase;transition:all .2s}
.btn-salvar-form:hover{background:var(--gold2)}.btn-salvar-form:disabled{background:var(--border2);color:var(--mid);cursor:not-allowed}
.btn-cancelar-edicao{background:none;border:1px solid var(--border2);padding:12px 20px;font-family:'Syne',sans-serif;font-size:.68rem;cursor:pointer;width:100%;margin-top:8px;color:var(--mid);letter-spacing:1.5px;text-transform:uppercase;transition:all .2s}
.btn-cancelar-edicao:hover{border-color:var(--mid);color:var(--text)}

.no-imoveis{grid-column:1/-1;text-align:center;padding:60px 20px;color:var(--mid)}
.no-imoveis h3{font-family:'Fraunces',serif;font-size:2rem;margin-bottom:10px;color:var(--text);font-weight:300}
.loading-msg{grid-column:1/-1;text-align:center;padding:120px 20px;color:var(--mid);font-size:.72rem;letter-spacing:3px;text-transform:uppercase}
/* FORMUL√ÅRIO BUSCA IM√ìVEL */
.busca-form{background:var(--bg2);border:1px solid var(--border2);padding:24px;max-width:500px;margin:0 auto;text-align:left}
.busca-form-title{font-size:.78rem;font-weight:700;color:var(--white);letter-spacing:1px;margin-bottom:16px;text-align:center}
.busca-fields{display:flex;flex-direction:column;gap:10px}
.busca-field{display:flex;flex-direction:column;gap:4px}
.busca-field label{font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--mid);font-weight:600}
.busca-field input,.busca-field select{background:var(--bg3);border:1px solid var(--border2);color:var(--text);padding:10px 12px;font-family:'Syne',sans-serif;font-size:.8rem;outline:none;transition:border-color .2s;width:100%}
.busca-field input:focus,.busca-field select:focus{border-color:var(--gold3)}
.busca-field select option{background:var(--bg3)}
.busca-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.busca-btn{background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--bg);border:none;padding:13px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;width:100%;letter-spacing:2px;text-transform:uppercase;transition:all .2s;margin-top:4px}
.busca-btn:hover{opacity:.9}
/* SKELETON */
.card-skeleton{background:var(--bg2);overflow:hidden;animation:fadeUp .5s ease both}
.skel-img{height:260px;background:linear-gradient(90deg,var(--bg3) 25%,var(--bg4) 50%,var(--bg3) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
.skel-body{padding:22px 24px}
.skel-line{height:12px;background:linear-gradient(90deg,var(--bg3) 25%,var(--bg4) 50%,var(--bg3) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite;margin-bottom:10px;border-radius:2px}
.skel-price{height:28px;width:60%;margin-bottom:12px}
.skel-title{width:80%}
.skel-local{width:50%}
.skel-desc{width:90%;margin-top:4px}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.toast{position:fixed;bottom:90px;right:28px;background:var(--bg3);color:var(--gold);padding:12px 20px;font-size:.72rem;letter-spacing:1.5px;z-index:9999;opacity:0;transition:opacity .3s;pointer-events:none;border-left:2px solid var(--gold);max-width:300px}
.toast.show{opacity:1}

/* ‚îÄ‚îÄ BOT√ÉO FLUTUANTE WHATSAPP ‚îÄ‚îÄ */
.wpp-float{position:fixed;bottom:28px;left:28px;z-index:600;display:flex;flex-direction:column;align-items:flex-start;gap:8px}
.wpp-float-btn{display:flex;align-items:center;gap:10px;background:#128C46;color:#fff;text-decoration:none;padding:14px 20px;border-radius:50px;box-shadow:0 4px 20px rgba(18,140,70,.4);font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;transition:all .3s;white-space:nowrap}
.wpp-float-btn:hover{background:#0a7a3a;transform:translateY(-2px);box-shadow:0 8px 28px rgba(18,140,70,.5)}
.wpp-float-btn svg{width:20px;height:20px;flex-shrink:0}
.wpp-float-pulse{width:12px;height:12px;background:#4ade80;border-radius:50%;border:2px solid #fff;animation:pulse 2s infinite;flex-shrink:0}
@keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.3);opacity:.7}}

/* ‚îÄ‚îÄ FAVORITOS ‚îÄ‚îÄ */
.btn-fav{position:absolute;top:36px;left:0;background:rgba(0,0,0,.7);border:none;width:32px;height:32px;cursor:pointer;font-size:.95rem;display:flex;align-items:center;justify-content:center;z-index:3;transition:all .2s;color:#fff}
.btn-fav:hover,.btn-fav.favoritado{background:rgba(220,38,38,.85)}
.fav-count-badge{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;font-size:.55rem;font-weight:700;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid var(--bg)}
/* Painel de favoritos */
.favs-overlay{display:none;position:fixed;inset:0;background:rgba(15,23,42,.75);z-index:1800;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(8px)}
.favs-overlay.open{display:flex;animation:fadeIn .2s ease}
.favs-box{background:#fff;width:100%;max-width:700px;max-height:90vh;overflow-y:auto;border:1px solid var(--border);position:relative;box-shadow:0 24px 80px rgba(0,0,0,.15)}
.favs-header{padding:26px 30px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.favs-header h2{font-family:'Fraunces',serif;font-size:1.5rem;font-weight:300;color:#0F172A}
.favs-close{background:none;border:1px solid var(--border2);color:var(--mid);width:34px;height:34px;cursor:pointer;font-size:.8rem;display:flex;align-items:center;justify-content:center;transition:all .2s}
.favs-close:hover{background:var(--gold);color:var(--bg);border-color:var(--gold)}
.favs-body{padding:20px 28px 28px;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}
.fav-card{background:#F8FAFC;border:1px solid var(--border);cursor:pointer;transition:border-color .2s;display:flex;gap:0;flex-direction:column}
.fav-card:hover{border-color:var(--gold3)}
.fav-card-img{height:140px;overflow:hidden;background:var(--bg)}
.fav-card-img img{width:100%;height:100%;object-fit:cover}
.fav-card-body{padding:14px 16px}
.fav-card-price{font-family:'Fraunces',serif;font-size:1.2rem;color:#0F172A;font-weight:300}
.fav-card-title{font-size:.65rem;color:var(--gold);letter-spacing:1.5px;text-transform:uppercase;margin-top:4px}
.fav-card-local{font-size:.7rem;color:var(--mid);margin-top:4px}
.fav-card-remove{width:100%;background:rgba(120,20,20,.15);border:none;border-top:1px solid var(--border);color:#c44;padding:10px;font-family:'Syne',sans-serif;font-size:.62rem;cursor:pointer;letter-spacing:1.5px;text-transform:uppercase;transition:all .2s}
.fav-card-remove:hover{background:#8B2020;color:#fff}
.favs-empty{grid-column:1/-1;text-align:center;padding:60px 20px;color:var(--mid);font-size:.8rem;letter-spacing:1px}
.btn-fav-header{position:relative;background:none;border:1px solid var(--border2);color:var(--mid);padding:9px 14px;font-family:'Syne',sans-serif;font-size:.65rem;cursor:pointer;letter-spacing:2px;text-transform:uppercase;transition:all .2s}
.btn-fav-header:hover{border-color:var(--gold3);color:var(--gold)}

/* ‚îÄ‚îÄ FILTRO QUARTOS ‚îÄ‚îÄ */
.quartos-select{background:#F8FAFC;border:1px solid var(--border);color:var(--mid);padding:10px 14px;font-family:'Syne',sans-serif;font-size:.72rem;outline:none;cursor:pointer;transition:border-color .2s;letter-spacing:.5px}
.quartos-select:focus{border-color:var(--gold3)}
.quartos-select option{background:#fff}

/* ‚îÄ‚îÄ BANNER CONTATO WHATSAPP ‚îÄ‚îÄ */
.wpp-banner{background:linear-gradient(135deg,#0a4d27,#128C46);padding:40px 52px;display:flex;align-items:center;justify-content:space-between;gap:24px;flex-wrap:wrap}
.wpp-banner-text h3{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:300;color:#fff;letter-spacing:-0.5px}
.wpp-banner-text p{font-size:.78rem;color:rgba(255,255,255,.7);margin-top:6px;letter-spacing:.3px}
.wpp-banner-btn{display:flex;align-items:center;gap:10px;background:#fff;color:#128C46;text-decoration:none;padding:14px 28px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;transition:all .2s;white-space:nowrap;flex-shrink:0}
.wpp-banner-btn:hover{background:#f0fdf4}

/* ‚îÄ‚îÄ AN√ÅLISE DE CR√âDITO ‚îÄ‚îÄ */
.credito-section{background:linear-gradient(135deg,#EFF6FF 0%,#DBEAFE 50%,#EFF6FF 100%);padding:64px 52px;border-top:1px solid #BFDBFE;border-bottom:1px solid #BFDBFE;position:relative;overflow:hidden}
.credito-section::before{content:'';position:absolute;top:-100px;right:-100px;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,rgba(21,101,192,.08) 0%,transparent 70%);pointer-events:none}
.credito-inner{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center}
.credito-tag{display:inline-block;background:rgba(21,101,192,.1);border:1px solid rgba(21,101,192,.3);padding:5px 14px;font-size:.65rem;letter-spacing:3px;text-transform:uppercase;color:var(--gold);font-weight:700;margin-bottom:20px}
.credito-titulo{font-family:'Fraunces',serif;font-size:2.4rem;font-weight:300;color:#0F172A;line-height:1.15;letter-spacing:-1px;margin-bottom:16px}
.credito-titulo em{color:var(--gold);font-style:italic}
.credito-sub{font-size:.85rem;color:var(--mid);line-height:1.8;margin-bottom:28px}
.credito-ben{font-size:.78rem;color:#7effc0;font-weight:600;letter-spacing:.5px;margin-bottom:8px}
.credito-form-box{background:#fff;border:1px solid var(--border);padding:28px;box-shadow:0 4px 24px rgba(21,101,192,.08)}
.credito-form-title{font-size:.85rem;font-weight:700;color:#0F172A;letter-spacing:1px;margin-bottom:4px}
.credito-form-sub{font-size:.68rem;color:var(--mid);letter-spacing:.5px;margin-bottom:20px}
.credito-fields{display:flex;flex-direction:column;gap:10px}
.credito-field{display:flex;flex-direction:column;gap:4px}
.credito-field label{font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--mid);font-weight:600}
.credito-field input,.credito-field select{background:#F8FAFC;border:1px solid var(--border);color:var(--text);padding:10px 12px;font-family:'Syne',sans-serif;font-size:.8rem;outline:none;transition:border-color .2s;width:100%}
.credito-field input:focus,.credito-field select:focus{border-color:var(--gold3)}
.credito-field select option{background:var(--bg3)}
.credito-row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.credito-field-sm{display:flex;flex-direction:column;gap:4px}
.credito-field-sm label{font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--mid);font-weight:600}
.credito-field-sm select{background:#F8FAFC;border:1px solid var(--border);color:var(--text);padding:10px 12px;font-family:'Syne',sans-serif;font-size:.8rem;outline:none;width:100%}
.credito-btn{background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--bg);border:none;padding:14px;font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;width:100%;letter-spacing:2px;text-transform:uppercase;transition:all .2s;margin-top:6px}
.credito-btn:hover{opacity:.9;transform:translateY(-1px)}

/* ‚îÄ‚îÄ RODAP√â ‚îÄ‚îÄ */
.footer{background:#1E293B;border-top:1px solid #334155;padding:32px 52px;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.footer-logo{font-family:'Fraunces',serif;color:#60A5FA;font-size:1.2rem;font-weight:300;letter-spacing:3px}
.footer-info{font-size:.65rem;color:#94A3B8;letter-spacing:.5px;text-align:center}
.footer-creci{font-size:.65rem;color:#94A3B8;letter-spacing:1px;text-align:right}

@media(max-width:640px){
  .credito-inner{grid-template-columns:1fr}
  .credito-section{padding:40px 20px}
  .credito-titulo{font-size:1.8rem}
  .wpp-banner{padding:28px 20px}
  .footer{padding:24px 20px;flex-direction:column;text-align:center}
  .footer-creci{text-align:center}
  .wpp-float{bottom:90px}
  .favs-body{grid-template-columns:1fr}
  header{padding:0 16px}
  /* Hero mobile */
  .hero{padding:32px 20px 36px}
  .hero h1{font-size:1.9rem;letter-spacing:-.5px}
  .hero-sub{font-size:.8rem;margin-bottom:24px}
  /* Busca hero mobile ‚Äî empilha verticalmente */
  .hero-search{flex-direction:column;gap:0;border-radius:0}
  .hero-search-icon{display:none}
  .hero-search-input{padding:14px 16px;font-size:.85rem;border-bottom:1px solid var(--border);width:100%}
  .hero-search-sep{display:none}
  .hero-search-select{padding:12px 16px;width:100%;border-bottom:1px solid var(--border);font-size:.8rem}
  .hero-search-btn{width:100%;padding:14px}
  /* Stats mobile */
  .hero-stats{gap:0;padding-top:20px}
  .hero-stat{padding:0 16px}
  .stat-num{font-size:1.4rem}
  .stat-label{font-size:.55rem;letter-spacing:2px}
  /* Carrossel mobile */
  .destaques-header{padding:0 20px;margin-bottom:16px}
  .carrossel{padding:0 20px 20px;gap:12px}
  .carrossel-card{flex:0 0 240px}
  .carrossel-arrow{display:none}
  /* Filtros mobile ‚Äî pills com scroll horizontal */
  .filters-bar{padding:0 0 0 20px;gap:0}
  .filters-left{gap:0}
  .filter-btn{padding:14px 16px;font-size:.62rem;letter-spacing:1.5px}
  .filters-right{padding-right:20px}
  .btn-nao-achei{font-size:.6rem;padding:6px 10px}
  .filters-count{display:none}
  /* Search bar mobile */
  .search-bar{padding:12px 20px;flex-direction:column;align-items:stretch}
  .price-select,.quartos-select{width:100%}
  /* Resto */
  .section{padding:24px 20px 100px}
  .modal-body{padding:20px}.admin-box-header,.admin-box-body{padding:20px}
  .form-row{grid-template-columns:1fr}
  .galeria{height:240px}.galeria-img{height:240px}
  .admin-bar{padding:12px 16px}
  .admin-bar-label span{display:none}
  .logo-sub{display:none}
  .modal-actions{flex-direction:column}
  .contato-body{padding:20px}
  .contato-header{padding:24px 20px 18px}
}
</style>
</head>
<body>

<header>
  <div class="logo">
    <span class="logo-main">M&amp;E</span>
    <span class="logo-sub">Im√≥veis &amp; Neg√≥cios</span>
  </div>
  <div class="header-right">
    <button class="header-contato-btn" onclick="abrirContato()">Contato</button>
    <button class="btn-fav-header" id="btn-fav-header" onclick="abrirFavoritos()">‚ù§ Favoritos <span id="fav-header-count" style="display:none" class="fav-count-badge"></span></button>
    <a href="#" class="header-wpp" id="btn-whats-header">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
      WhatsApp
    </a>
  </div>
</header>

<section class="hero">
  <div class="hero-grid-lines"></div>
  <div class="hero-glow"></div>
  <div class="hero-content">
    <div class="hero-eyebrow">M&amp;E Im√≥veis &amp; Neg√≥cios</div>
    <h1>O im√≥vel <em>certo</em> para cada momento.</h1>
    <p class="hero-sub">Qualidade, confian√ßa e os melhores im√≥veis selecionados para voc√™ em Goi√¢nia e regi√£o.</p>

    <!-- BUSCA INTEGRADA NO HERO -->
    <div class="hero-search">
      <span class="hero-search-icon">üîç</span>
      <input type="text" class="hero-search-input" id="search-input" placeholder="Buscar por t√≠tulo, bairro, cidade..." oninput="buscar()">
      <div class="hero-search-sep"></div>
      <select class="hero-search-select" id="price-filter" onchange="buscar()">
        <option value="">Qualquer pre√ßo</option>
        <option value="200000">At√© R$ 200 mil</option>
        <option value="400000">At√© R$ 400 mil</option>
        <option value="600000">At√© R$ 600 mil</option>
        <option value="1000000">At√© R$ 1 milh√£o</option>
        <option value="2000000">At√© R$ 2 milh√µes</option>
      </select>
      <div class="hero-search-sep"></div>
      <select class="hero-search-select" id="quartos-filter" onchange="buscar()">
        <option value="">Todos os quartos</option>
        <option value="1">1 quarto</option>
        <option value="2">2 quartos</option>
        <option value="3">3 quartos</option>
        <option value="4">4+ quartos</option>
      </select>
      <button class="hero-search-btn" onclick="buscar()">Buscar</button>
    </div>

    <div class="hero-stats">
      <div class="hero-stat">
        <span class="stat-num" id="stat-count">...</span>
        <span class="stat-label">Im√≥veis Dispon√≠veis</span>
      </div>
      <div class="hero-stat">
        <span class="stat-num">100%</span>
        <span class="stat-label">Confian√ßa Garantida</span>
      </div>
      <div class="hero-stat">
        <span class="stat-num">24h</span>
        <span class="stat-label">Atendimento R√°pido</span>
      </div>
    </div>
  </div>
</section>

<!-- Aplica cache instant√¢neo no contador, sem esperar Firebase -->
<script>
(function(){
  try{
    var cached=localStorage.getItem('me_imoveis_cache');
    if(cached){
      var lista=JSON.parse(cached);
      var el=document.getElementById('stat-count');
      if(el&&lista.length>0) el.textContent=lista.length;
    }
  }catch(e){}
})();
</script>

<!-- CARROSSEL DE DESTAQUES -->
<div class="destaques-section" id="destaques-section" style="display:none">
  <div class="destaques-header">
    <div class="destaques-titulo">Im√≥veis em <span>Destaque</span></div>
    <button class="destaques-ver-todos" onclick="filtrar('todos',document.querySelector('.filter-btn'));document.getElementById('grid').scrollIntoView({behavior:'smooth'})">Ver todos ‚Üí</button>
  </div>
  <div class="carrossel-wrap">
    <button class="carrossel-arrow left" onclick="moverCarrossel(-1)">‚Äπ</button>
    <div class="carrossel" id="carrossel"></div>
    <button class="carrossel-arrow right" onclick="moverCarrossel(1)">‚Ä∫</button>
  </div>
</div>

<div class="filters-bar">
  <div class="filters-left">
    <button class="filter-btn active" onclick="filtrar('todos',this)">Todos</button>
    <button class="filter-btn" onclick="filtrar('Residencial',this)">Residencial</button>
    <button class="filter-btn" onclick="filtrar('Comercial',this)">Comercial</button>
    <button class="filter-btn" onclick="filtrar('Terreno',this)">Terrenos</button>
  </div>
  <div class="filters-right">
    <span class="filters-count" id="grid-count"></span>
    <button class="btn-nao-achei" onclick="abrirModalBusca()">üîç N√£o achei o que quero</button>
  </div>
</div>

<!-- MODAL BUSCA -->
<div class="modal-overlay" id="modal-busca" onclick="fecharModalBusca(event)">
  <div class="modal-busca-box">
    <button class="modal-close" onclick="fecharModalBusca()">‚úï</button>
    <div class="busca-form-title" style="margin-bottom:18px;font-size:.95rem">üìã Me conta o que voc√™ procura</div>
    <div class="busca-fields">
      <div class="busca-field"><label>Seu nome</label><input type="text" id="mbq-nome" placeholder="Nome completo"></div>
      <div class="busca-field"><label>Seu WhatsApp</label><input type="text" id="mbq-wpp" placeholder="(62) 99999-9999"></div>
      <div class="busca-row">
        <div class="busca-field"><label>Tipo</label><select id="mbq-tipo"><option value="">Selecione</option><option>Casa</option><option>Apartamento</option><option>Terreno</option><option>Comercial</option></select></div>
        <div class="busca-field"><label>Quartos</label><select id="mbq-quartos"><option value="">Qualquer</option><option>1</option><option>2</option><option>3</option><option>4+</option></select></div>
      </div>
      <div class="busca-row">
        <div class="busca-field"><label>Valor at√©</label><select id="mbq-valor"><option value="">Selecione</option><option>R$ 200 mil</option><option>R$ 400 mil</option><option>R$ 600 mil</option><option>R$ 800 mil</option><option>Acima de R$ 800 mil</option></select></div>
        <div class="busca-field"><label>Bairro preferido</label><input type="text" id="mbq-bairro" placeholder="Ex: Setor Bueno"></div>
      </div>
      <button class="busca-btn" onclick="enviarBuscaModal()">üì≤ Quero ser avisado</button>
    </div>
  </div>
</div>

<div class="section">
  <div class="grid" id="grid">
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
    <div class="card-skeleton"><div class="skel-img"></div><div class="skel-body"><div class="skel-line skel-price"></div><div class="skel-line skel-title"></div><div class="skel-line skel-local"></div><div class="skel-line skel-desc"></div></div></div>
  </div>
</div>

<!-- MODAL IM√ìVEL -->
<div class="modal-overlay" id="modal" onclick="fecharModal(event)">
  <div class="modal">
    <button class="modal-close" onclick="fecharModal()">‚úï</button>
    <div class="galeria" id="modal-galeria">
      <div class="galeria-placeholder" id="modal-placeholder">üè†</div>
      <button class="galeria-btn galeria-prev" id="galeria-prev" onclick="galeriaNav(-1)" style="display:none">‚Äπ</button>
      <button class="galeria-btn galeria-next" id="galeria-next" onclick="galeriaNav(1)" style="display:none">‚Ä∫</button>
      <div class="galeria-dots" id="galeria-dots"></div>
      <div class="galeria-counter" id="galeria-counter" style="display:none"></div>
    </div>
    <div class="modal-body">
      <div>
        <span class="modal-badge" id="modal-tipo"></span>
        <span class="modal-tag-inline" id="modal-tag-inline" style="display:none"></span>
      </div>
      <div class="modal-price" id="modal-preco"></div>
      <div class="modal-title" id="modal-titulo"></div>
      <div class="modal-location" id="modal-local"></div>
      <div class="modal-features" id="modal-features"></div>
      <div class="modal-desc" id="modal-desc"></div>
      <div id="modal-video-wrap" style="display:none;margin-bottom:24px">
        <div style="font-size:.65rem;letter-spacing:2px;text-transform:uppercase;color:var(--mid);margin-bottom:10px;font-weight:600">üé• V√≠deo do Im√≥vel</div>
        <video id="modal-video" controls style="width:100%;max-height:320px;background:#000;display:block"></video>
      </div>
      <div class="modal-actions">
        <a href="#" class="btn-whatsapp" id="modal-wpp" target="_blank">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
          Tenho Interesse
        </a>
        <button class="btn-share" id="btn-share" onclick="compartilhar()">üì§ Compartilhar</button>
      </div>
    </div>
  </div>
</div>

<!-- CONTATO -->
<div class="contato-overlay" id="contato-overlay" onclick="fecharContato(event)">
  <div class="contato-box">
    <button class="contato-close" onclick="fecharContato()">‚úï</button>
    <div class="contato-header">
      <h2>Entre em contato</h2>
      <p>Estamos prontos para te atender. Escolha o canal de sua prefer√™ncia.</p>
    </div>
    <div class="contato-body">
      <a href="#" class="contato-item" id="contato-wpp">
        <div class="contato-icon">üí¨</div>
        <div class="contato-info">
          <span class="contato-label">WhatsApp</span>
          <span class="contato-value" id="contato-wpp-num">‚Äî</span>
        </div>
      </a>
      <div class="contato-item" style="cursor:default">
        <div class="contato-icon">üè¢</div>
        <div class="contato-info">
          <span class="contato-label">Empresa</span>
          <span class="contato-value">M&E Im√≥veis &amp; Neg√≥cios</span>
        </div>
      </div>
      <div class="contato-item" style="cursor:default">
        <div class="contato-icon">‚è∞</div>
        <div class="contato-info">
          <span class="contato-label">Atendimento</span>
          <span class="contato-value">Seg‚ÄìSex 8h‚Äì18h ¬∑ S√°b 8h‚Äì12h</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- SE√á√ÉO AN√ÅLISE DE CR√âDITO -->
<div class="credito-section" id="analise-credito">
  <div class="credito-inner">
    <div class="credito-left">
      <div class="credito-tag">üè† Financiamento Imobili√°rio</div>
      <h2 class="credito-titulo">Casa pr√≥pria <em>sem entrada</em> pode ser realidade!</h2>
      <p class="credito-sub">Fa√ßa sua an√°lise de cr√©dito gratuita agora e descubra em minutos quanto voc√™ pode financiar.</p>
      <div class="credito-beneficios">
        <div class="credito-ben">‚úì Use seu FGTS como entrada</div>
        <div class="credito-ben">‚úì An√°lise r√°pida e sem compromisso</div>
        <div class="credito-ben">‚úì Atendimento personalizado</div>
      </div>
    </div>
    <div class="credito-right">
      <div class="credito-form-box">
        <div class="credito-form-title">üìã An√°lise de Cr√©dito Gratuita</div>
        <div class="credito-form-sub">Preencha abaixo ‚Äî retorno em at√© 24h</div>
        <div class="credito-fields">
          <div class="credito-field"><label>Nome completo</label><input type="text" id="cr-nome" placeholder="Seu nome"></div>
          <div class="credito-field"><label>WhatsApp</label><input type="text" id="cr-wpp" placeholder="(62) 99999-9999"></div>
          <div class="credito-field"><label>CPF (para consulta de cr√©dito)</label><input type="text" id="cr-cpf-num" placeholder="000.000.000-00" maxlength="14" oninput="this.value=this.value.replace(/\D/g,'').replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d)/,'$1.$2').replace(/(\d{3})(\d{1,2})$/,'$1-$2')"></div>
          <div class="credito-row2">
            <div class="credito-field-sm">
              <label>Tipo de im√≥vel</label>
              <select id="cr-tipo-imovel"><option value="">Selecione</option><option>Casa</option><option>Apartamento</option><option>Qualquer</option></select>
            </div>
            <div class="credito-field-sm">
              <label>Tem FGTS?</label>
              <select id="cr-fgts"><option value="">...</option><option>Sim</option><option>N√£o</option></select>
            </div>
          </div>
          <div class="credito-field"><label>Renda mensal</label>
            <select id="cr-renda">
              <option value="">Selecione...</option>
              <option>At√© R$ 2.000</option>
              <option>R$ 2.000 ‚Äì R$ 4.000</option>
              <option>R$ 4.000 ‚Äì R$ 7.000</option>
              <option>R$ 7.000 ‚Äì R$ 10.000</option>
              <option>Acima de R$ 10.000</option>
            </select>
          </div>
          <div class="credito-field"><label>Valor do im√≥vel que busca</label>
            <select id="cr-valor">
              <option value="">Selecione...</option>
              <option>At√© R$ 200 mil</option>
              <option>R$ 200 mil ‚Äì R$ 400 mil</option>
              <option>R$ 400 mil ‚Äì R$ 600 mil</option>
              <option>Acima de R$ 600 mil</option>
            </select>
          </div>
          <div class="credito-field">
            <label>Restri√ß√£o no CPF?</label>
            <select id="cr-cpf"><option value="">...</option><option>N√£o</option><option>Sim</option></select>
          </div>
          <button class="credito-btn" onclick="enviarAnalise()">üì≤ Quero minha an√°lise gratuita</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- BANNER WHATSAPP -->
<div class="wpp-banner" id="wpp-banner">
  <div class="wpp-banner-text">
    <h3>Encontrou o im√≥vel ideal?</h3>
    <p>Fale comigo agora pelo WhatsApp e agende sua visita hoje mesmo.</p>
  </div>
  <a href="#" class="wpp-banner-btn" id="wpp-banner-link" target="_blank">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    Falar no WhatsApp
  </a>
</div>

<!-- RODAP√â -->
<footer class="footer">
  <div class="footer-logo">M&amp;E Im√≥veis</div>
  <div class="footer-info">Corretora Aut√¥noma ¬∑ Goi√¢nia, GO<br><span style="color:var(--muted)"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2e5e464f4047005e4f47564f416e49434f4742004d4143">[email&#160;protected]</a> ¬∑ (62) 98186-0902</span></div>
  <div class="footer-creci">CRECI ¬∑ GO<br><span style="color:var(--muted);font-size:.6rem">¬© 2025 M&amp;E Im√≥veis</span></div>
</footer>

<!-- BOT√ÉO FLUTUANTE WHATSAPP -->
<a href="#" class="wpp-float-btn" id="wpp-float-link" target="_blank" style="position:fixed;bottom:28px;left:28px;z-index:600">
  <div class="wpp-float-pulse"></div>
  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
  Falar Agora
</a>

<!-- PAINEL FAVORITOS -->
<div class="favs-overlay" id="favs-overlay" onclick="if(event.target===this)fecharFavoritos()">
  <div class="favs-box">
    <div class="favs-header">
      <h2>‚ù§ Meus Favoritos</h2>
      <button class="favs-close" onclick="fecharFavoritos()">‚úï</button>
    </div>
    <div class="favs-body" id="favs-body"></div>
  </div>
</div>

<!-- SENHA -->
<div class="senha-overlay" id="senha-overlay">
  <div class="senha-box">
    <h3>Acesso Restrito</h3>
    <p>Digite a senha para acessar o painel de gerenciamento</p>
    <input type="password" class="senha-input" id="senha-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')verificarSenha()">
    <button class="senha-btn" onclick="verificarSenha()">Entrar</button>
    <div class="senha-erro" id="senha-erro"></div>
    <button class="senha-cancel" onclick="fecharSenha()">Cancelar</button>
  </div>
</div>

<button class="admin-toggle" onclick="pedirSenha()">‚öô Gerenciar</button>

<div class="admin-bar" id="admin-bar">
  <div class="admin-bar-label">‚öô Modo Administrador<span>Clique em ‚úè Editar ou üóë Excluir nos cards abaixo</span></div>
  <div class="admin-bar-btns">
    <button class="btn-admin-add" onclick="abrirFormAdicionar()">+ Adicionar Im√≥vel</button>
    <button class="btn-admin-exit" onclick="toggleAdmin()">‚úï Sair</button>
  </div>
</div>

<div class="admin-panel" id="admin">
  <div class="admin-box">
    <div class="admin-box-header">
      <h2 id="admin-titulo">Adicionar Im√≥vel</h2>
      <button class="btn-ia-preencher" onclick="abrirIAPreencher()">‚ú® Colar Descritivo</button>
    </div>
    <div class="admin-box-body">
      <!-- PAINEL IA -->
      <div class="ia-panel" id="ia-panel" style="display:none">
        <div class="ia-panel-label">‚ú® Cole o descritivo do im√≥vel abaixo ‚Äî a IA preenche tudo automaticamente</div>
        <textarea id="ia-texto" class="ia-textarea" placeholder="Ex:&#10;Casa 3 quartos, 2 banheiros, 1 vaga&#10;Residencial Canad√°, Goi√¢nia&#10;R$ 599.000&#10;√Årea gourmet, energia solar..."></textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn-ia-processar" id="btn-ia-processar" onclick="processarIA()">‚ú® Preencher Formul√°rio</button>
          <button class="btn-ia-cancelar" onclick="fecharIAPreencher()">Cancelar</button>
        </div>
      </div>
      <div class="edit-indicator" id="edit-indicator" style="display:none">‚úè Editando im√≥vel ‚Äî altere os campos e salve.</div>
      <div class="form-group"><label>T√≠tulo do Im√≥vel</label><input type="text" id="f-titulo" placeholder="Ex: Apartamento 3 quartos no Centro"></div>
      <div class="form-row">
        <div class="form-group"><label>Tipo</label><select id="f-tipo"><option>Residencial</option><option>Comercial</option><option>Terreno</option></select></div>
        <div class="form-group"><label>Pre√ßo</label><input type="text" id="f-preco" placeholder="R$ 350.000"></div>
      </div>
      <div class="form-group"><label>Localiza√ß√£o / Endere√ßo</label><input type="text" id="f-local" placeholder="Rua das Flores, 123 ‚Äî Bairro, Cidade"></div>
      <div class="form-row">
        <div class="form-group"><label>Quartos</label><input type="number" id="f-quartos" min="0" placeholder="0"></div>
        <div class="form-group"><label>Banheiros</label><input type="number" id="f-banheiros" min="0" placeholder="0"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Vagas de Garagem</label><input type="number" id="f-vagas" min="0" placeholder="0"></div>
        <div class="form-group"><label>√Årea (m¬≤)</label><input type="number" id="f-area" min="0" placeholder="0"></div>
      </div>
      <div class="form-group">
        <label>üè∑Ô∏è Tag de Destaque</label>
        <select id="f-tag">
          <option value="">Nenhuma</option>
          <option value="novo">üü¢ Novo</option>
          <option value="oportunidade">üü† Oportunidade</option>
          <option value="destaque">üü£ Destaque</option>
        </select>
      </div>
      <div class="form-group">
        <label>üì∏ Fotos do Im√≥vel</label>
        <!-- Upload direto do computador -->
        <div class="upload-area" id="upload-area" onclick="document.getElementById('input-fotos').click()" ondragover="event.preventDefault();this.classList.add('dragover')" ondragleave="this.classList.remove('dragover')" ondrop="handleDrop(event)">
          <div class="upload-icon">üìÅ</div>
          <div class="upload-text">Clique aqui ou arraste as fotos do computador</div>
          <div class="upload-sub">JPG, PNG, WEBP ‚Äî v√°rias de uma vez</div>
          <input type="file" id="input-fotos" accept="image/*" multiple style="display:none" onchange="handleFiles(this.files)">
        </div>
        <!-- Pr√©via das fotos selecionadas -->
        <div class="fotos-preview" id="fotos-preview"></div>
        <!-- Op√ß√£o alternativa: link manual -->
        <details style="margin-top:10px">
          <summary style="font-size:.68rem;color:var(--mid);cursor:pointer;letter-spacing:1px">+ Adicionar por link (opcional)</summary>
          <div style="margin-top:8px">
            <div class="fotos-lista" id="fotos-lista">
              <div class="foto-item"><input type="text" placeholder="https://i.imgur.com/exemplo.jpg"><button onclick="removerFoto(this)">‚úï</button></div>
            </div>
            <button class="btn-add-foto" onclick="adicionarCampoFoto()">+ Adicionar outro link</button>
          </div>
        </details>
      </div>
      <div class="form-group">
        <label>üé• V√≠deo do Im√≥vel (opcional)</label>
        <div class="upload-area" id="upload-video-area" onclick="document.getElementById('input-video').click()" style="padding:20px">
          <div class="upload-icon" id="video-upload-icon">üé¨</div>
          <div class="upload-text" id="video-upload-text">Clique para selecionar o v√≠deo do celular</div>
          <div class="upload-sub">MP4, MOV ‚Äî m√°x recomendado 50MB</div>
          <input type="file" id="input-video" accept="video/*" style="display:none" onchange="handleVideo(this.files[0])">
        </div>
        <div id="video-preview-wrap" style="display:none;margin-top:8px;position:relative">
          <video id="video-preview" controls style="width:100%;max-height:220px;background:#000;display:block"></video>
          <button onclick="removerVideo()" style="position:absolute;top:6px;right:6px;background:rgba(0,0,0,.8);color:#fff;border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:.8rem">‚úï</button>
        </div>
      </div>
      <div class="form-group"><label>Descri√ß√£o</label><textarea id="f-desc" placeholder="Descreva o im√≥vel em detalhes..."></textarea></div>
      <div class="form-group"><label>WhatsApp (com DDD, sem espa√ßo)</label><input type="text" id="f-wpp" placeholder="62999999999"></div>
      <button class="btn-salvar-form" id="btn-salvar" onclick="salvarImovel()">‚úì Adicionar ao Cat√°logo</button>
      <button class="btn-cancelar-edicao" id="btn-cancelar" style="display:none" onclick="cancelarEdicao()">‚úï Cancelar Edi√ß√£o</button>
      <button class="btn-cancelar-edicao" onclick="fecharPainelAdmin()">Fechar</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import{getFirestore,collection,addDoc,getDocs,deleteDoc,doc,updateDoc,orderBy,query}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig={apiKey:"AIzaSyDPPWetVT4Kkgsf2yzPc5XAyUn3bZDVnR4",authDomain:"imoveis-cc9ac.firebaseapp.com",projectId:"imoveis-cc9ac",storageBucket:"imoveis-cc9ac.firebasestorage.app",messagingSenderId:"932401411828",appId:"1:932401411828:web:18acd182e3b90cb23510a1"};
const app=initializeApp(firebaseConfig),db=getFirestore(app);

// ===== SENHA (mude aqui!) =====
const SENHA_ADMIN = "meimoveis2025";

let imoveis=[],filtroAtual='todos',adminAberto=false,whatsappGlobal='',galeriaFotos=[],galeriaIndex=0,modoEdicaoId=null,termoBusca='',filtroPreco='',filtroQuartos='',imovelAtual=null;
let favoritos=JSON.parse(localStorage.getItem('me_favoritos')||'[]');

function salvarFavoritos(){localStorage.setItem('me_favoritos',JSON.stringify(favoritos));}
function atualizarBadgeFavs(){
  const c=document.getElementById('fav-header-count');
  if(favoritos.length>0){c.style.display='flex';c.textContent=favoritos.length;}
  else{c.style.display='none';}
}
window.toggleFav=function(id,event){
  event.stopPropagation();
  const idx=favoritos.indexOf(id);
  if(idx===-1)favoritos.push(id); else favoritos.splice(idx,1);
  salvarFavoritos();atualizarBadgeFavs();render();
};
window.abrirFavoritos=function(){
  const body=document.getElementById('favs-body');
  const lista=imoveis.filter(i=>favoritos.includes(i.id));
  if(lista.length===0){body.innerHTML='<div class="favs-empty">Voc√™ ainda n√£o favoritou nenhum im√≥vel.<br><span style="font-size:.7rem;margin-top:8px;display:block">Clique no ‚ù§ nos cards para favoritar.</span></div>';}
  else{body.innerHTML=lista.map(im=>{
    const fotos=Array.isArray(im.fotos)?im.fotos.filter(f=>f):(im.foto?[im.foto]:[]);
    return`<div class="fav-card" onclick="fecharFavoritos();abrirModal('${im.id}')">
      <div class="fav-card-img">${fotos[0]?`<img src="${fotos[0]}" alt="${im.titulo}">`:'<div style="height:100%;display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:var(--muted)">üè†</div>'}</div>
      <div class="fav-card-body">
        <div class="fav-card-price">${im.preco}</div>
        <div class="fav-card-title">${im.titulo}</div>
        <div class="fav-card-local">üìç ${im.local}</div>
      </div>
      <button class="fav-card-remove" onclick="event.stopPropagation();toggleFav('${im.id}',event);renderFavsPanel()">üóë Remover dos favoritos</button>
    </div>`;
  }).join('');}
  document.getElementById('favs-overlay').classList.add('open');document.body.style.overflow='hidden';
};
window.renderFavsPanel=function(){if(document.getElementById('favs-overlay').classList.contains('open'))abrirFavoritos();};
window.fecharFavoritos=function(){document.getElementById('favs-overlay').classList.remove('open');document.body.style.overflow='';};

// ===== SENHA =====
window.pedirSenha=function(){document.getElementById('senha-overlay').classList.add('open');document.getElementById('senha-input').value='';document.getElementById('senha-erro').textContent='';setTimeout(()=>document.getElementById('senha-input').focus(),100);};
window.fecharSenha=function(){document.getElementById('senha-overlay').classList.remove('open');};
window.verificarSenha=function(){
  const v=document.getElementById('senha-input').value;
  if(v===SENHA_ADMIN){fecharSenha();toggleAdmin();}
  else{document.getElementById('senha-erro').textContent='Senha incorreta. Tente novamente.';document.getElementById('senha-input').value='';}
};

// ===== CARREGAR COM CACHE AGRESSIVO =====
async function carregarImoveis(){
  const cacheKey='me_imoveis_cache';
  const cacheTime='me_imoveis_cache_time';
  const cached=localStorage.getItem(cacheKey);
  const cachedAt=parseInt(localStorage.getItem(cacheTime)||'0');
  const agora=Date.now();

  // SEMPRE usa o cache imediatamente se existir ‚Äî mostra os im√≥veis na hora
  if(cached){
    try{
      imoveis=JSON.parse(cached);
      if(imoveis.length>0&&imoveis[0].wpp){whatsappGlobal=imoveis[0].wpp;atualizarContato();}
      document.getElementById('stat-count').textContent=imoveis.length||'0';
      render(); // renderiza agora com o cache
      renderCarrossel();
    }catch(e){imoveis=[];mostrarSkeleton();}
  } else {
    mostrarSkeleton(); // s√≥ mostra skeleton se n√£o tiver cache nenhum
  }

  // Se cache tem menos de 3min, atualiza Firebase em background ap√≥s 3s (sem pressa)
  const cacheRecente=cached&&(agora-cachedAt)<3*60*1000;
  if(cacheRecente&&imoveis.length>0){
    setTimeout(()=>atualizarDoFirebase(cacheKey,cacheTime),3000);
  } else {
    // Cache velho ou vazio: busca Firebase agora (mas tela j√° est√° vis√≠vel com cache ou skeleton)
    await atualizarDoFirebase(cacheKey,cacheTime);
  }
}

async function atualizarDoFirebase(cacheKey,cacheTime){
  try{
    const timeoutPromise=new Promise((_,rej)=>setTimeout(()=>rej(new Error('timeout')),6000));
    const q=query(collection(db,"imoveis"),orderBy("criadoEm","desc"));
    const snap=await Promise.race([getDocs(q),timeoutPromise]);
    const novos=snap.docs.map(d=>({id:d.id,...d.data()}));
    localStorage.setItem(cacheKey,JSON.stringify(novos));
    localStorage.setItem(cacheTime,String(Date.now()));
    imoveis=novos;
    if(imoveis.length>0&&imoveis[0].wpp){whatsappGlobal=imoveis[0].wpp;atualizarContato();}
    document.getElementById('stat-count').textContent=imoveis.length||'0';
    render(); // sempre renderiza ap√≥s buscar no Firebase
    renderCarrossel();
  }catch(e){
    if(imoveis.length===0){
      document.getElementById('grid').innerHTML=`<div class="loading-msg" style="display:flex;flex-direction:column;align-items:center;gap:16px">
        <div style="font-size:2rem">üì°</div>
        <div>Conex√£o lenta. <button onclick="location.reload()" style="background:var(--gold);color:#fff;border:none;padding:8px 20px;cursor:pointer;font-family:'Syne',sans-serif;font-size:.7rem;letter-spacing:1px;text-transform:uppercase;margin-left:4px">Tentar novamente</button></div>
      </div>`;
    }
  }
}

function mostrarSkeleton(){
  const grid=document.getElementById('grid');
  grid.innerHTML=Array(6).fill(`
    <div class="card-skeleton">
      <div class="skel-img"></div>
      <div class="skel-body">
        <div class="skel-line skel-price"></div>
        <div class="skel-line skel-title"></div>
        <div class="skel-line skel-local"></div>
        <div class="skel-line skel-desc"></div>
      </div>
    </div>`).join('');
}

// ===== FILTRO DE PRE√áO =====
function extrairPreco(str){return parseInt((str||'').replace(/\D/g,''))||0;}

// ===== RENDER =====
function render(){
  const grid=document.getElementById('grid');
  let lista=filtroAtual==='todos'?imoveis:imoveis.filter(i=>(i.tipo||'').toLowerCase()===filtroAtual.toLowerCase());
  if(termoBusca){const t=termoBusca.toLowerCase();lista=lista.filter(i=>(i.titulo||'').toLowerCase().includes(t)||(i.local||'').toLowerCase().includes(t)||(i.desc||'').toLowerCase().includes(t));}
  if(filtroPreco){const max=parseInt(filtroPreco);lista=lista.filter(i=>extrairPreco(i.preco)<=max);}
  if(filtroQuartos){const q=parseInt(filtroQuartos);lista=lista.filter(i=>filtroQuartos==='4'?i.quartos>=4:i.quartos===q);}
  document.getElementById('grid-count').textContent=lista.length>0?`${lista.length} im√≥ve${lista.length===1?'l':'is'} encontrado${lista.length===1?'':'s'}`:'';
  if(lista.length===0){
    const tipoNome=filtroAtual==='todos'?'im√≥veis':filtroAtual==='Residencial'?'im√≥veis residenciais':filtroAtual==='Comercial'?'im√≥veis comerciais':'terrenos';
    grid.innerHTML=`<div class="no-imoveis" style="background:#F8FAFC;border:1px solid #E2E8F0;">
    <div style="font-size:2.5rem;margin-bottom:16px">üîç</div>
    <h3>Nenhum im√≥vel dispon√≠vel no momento</h3>
    <p style="font-size:.78rem;margin-top:8px;color:#555;margin-bottom:24px">Deixe seus dados e te aviso assim que surgir uma op√ß√£o de <strong>${tipoNome}</strong>!</p>
    <div class="busca-form">
      <div class="busca-form-title">üìã Me conta o que voc√™ procura</div>
      <div class="busca-fields">
        <div class="busca-field"><label>Seu nome</label><input type="text" id="bq-nome" placeholder="Nome completo"></div>
        <div class="busca-field"><label>Seu WhatsApp</label><input type="text" id="bq-wpp" placeholder="(62) 99999-9999"></div>
        <div class="busca-row">
          <div class="busca-field"><label>Tipo</label><select id="bq-tipo"><option value="">Selecione</option><option>Residencial</option><option>Comercial</option><option>Terreno</option></select></div>
          <div class="busca-field"><label>Quartos</label><select id="bq-quartos"><option value="">Qualquer</option><option>1</option><option>2</option><option>3</option><option>4+</option></select></div>
        </div>
        <div class="busca-row">
          <div class="busca-field"><label>Valor at√©</label><select id="bq-valor"><option value="">Selecione</option><option>R$ 200 mil</option><option>R$ 400 mil</option><option>R$ 600 mil</option><option>R$ 800 mil</option><option>Acima de R$ 800 mil</option></select></div>
          <div class="busca-field"><label>Bairro preferido</label><input type="text" id="bq-bairro" placeholder="Ex: Setor Bueno"></div>
        </div>
        <button class="busca-btn" onclick="enviarBusca()">üì≤ Quero ser avisado</button>
      </div>
    </div>
  </div>`;return;}
  grid.innerHTML=lista.map((im,idx)=>{
    const fotos=Array.isArray(im.fotos)?im.fotos.filter(f=>f):(im.foto?[im.foto]:[]);
    const pf=fotos[0]||'';
    const isFav=favoritos.includes(im.id);
    const tagHtml=im.tag?`<span class="card-tag ${im.tag}">${im.tag==='novo'?'üü¢ Novo':im.tag==='oportunidade'?'üü† Oferta':'üü£ Destaque'}</span>`:'';
    const feats=[im.quartos>0?`<span class="card-feat">üõè ${im.quartos} qtos</span>`:'',im.banheiros>0?`<span class="card-feat">üöø ${im.banheiros} ban</span>`:'',im.vagas>0?`<span class="card-feat">üöó ${im.vagas} vaga${im.vagas>1?'s':''}</span>`:'',im.area>0?`<span class="card-feat">üìê ${im.area}m¬≤</span>`:''].filter(Boolean);
    return`<div class="card" style="animation-delay:${Math.min(idx,.15)*0.05}s">
      <div class="card-img-wrap" onclick="abrirModal('${im.id}')">
        ${pf?`<img src="${pf}" class="card-img" alt="${im.titulo||''}" loading="lazy" onerror="this.parentElement.innerHTML='<div class=card-img-placeholder>üè†</div>'">`:'<div class="card-img-placeholder">üè†</div>'}
        <div class="card-img-overlay"></div>
        <span class="card-badge">${im.tipo||''}</span>
        ${tagHtml}
        ${fotos.length>1?`<span class="card-foto-count">üì∑ ${fotos.length} fotos</span>`:''}
        <button class="btn-fav${isFav?' favoritado':''}" onclick="toggleFav('${im.id}',event)" title="${isFav?'Remover dos favoritos':'Adicionar aos favoritos'}">${isFav?'‚ù§':'ü§ç'}</button>
        <button class="card-del" onclick="event.stopPropagation();deletarImovel('${im.id}')">üóë</button>
      </div>
      <div class="card-body" onclick="abrirModal('${im.id}')">
        <div class="card-price">${im.preco||''}</div>
        <div class="card-title">${im.titulo||''}</div>
        <div class="card-location">üìç ${im.local||''}</div>
        <div class="card-desc">${im.desc||''}</div>
        ${feats.length>0?`<div class="card-features">${feats.join('')}</div>`:''}
      </div>
      <div class="card-admin-btns">
        <button class="card-btn-edit" onclick="editarImovel('${im.id}')">‚úè Editar</button>
        <button class="card-btn-del" onclick="deletarImovel('${im.id}')">üóë Excluir</button>
      </div>
    </div>`;
  }).join('');
}

window.filtrar=function(tipo,btn){filtroAtual=tipo;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));if(btn)btn.classList.add('active');render();};
window.buscar=function(){termoBusca=document.getElementById('search-input').value;filtroPreco=document.getElementById('price-filter').value;filtroQuartos=document.getElementById('quartos-filter').value;render();};

// ===== CARROSSEL DE DESTAQUES =====
function renderCarrossel(){
  const destaques=imoveis.filter(i=>i.tag&&['destaque','novo','oportunidade'].includes(i.tag));
  const secao=document.getElementById('destaques-section');
  if(destaques.length===0){secao.style.display='none';return;}
  secao.style.display='block';
  document.getElementById('carrossel').innerHTML=destaques.map(im=>{
    const fotos=Array.isArray(im.fotos)?im.fotos.filter(f=>f):(im.foto?[im.foto]:[]);
    const pf=fotos[0]||'';
    const tagLabel=im.tag==='novo'?'üü¢ Novo':im.tag==='oportunidade'?'üü† Oferta':'üü£ Destaque';
    return`<div class="carrossel-card" onclick="abrirModal('${im.id}')">
      <div class="carrossel-img">
        ${pf?`<img src="${pf}" alt="${im.titulo||''}" loading="lazy" onerror="this.parentElement.innerHTML='<div class=carrossel-img-placeholder>üè†</div>'">`:'<div class="carrossel-img-placeholder">üè†</div>'}
        <div class="carrossel-overlay"></div>
        <span class="carrossel-badge">${im.tipo||''}</span>
        <span class="carrossel-tag ${im.tag}">${tagLabel}</span>
      </div>
      <div class="carrossel-body">
        <div class="carrossel-price">${im.preco||''}</div>
        <div class="carrossel-title">${im.titulo||''}</div>
        <div class="carrossel-local">üìç ${im.local||''}</div>
      </div>
    </div>`;
  }).join('');
}
window.moverCarrossel=function(dir){
  const c=document.getElementById('carrossel');
  c.scrollBy({left:dir*320,behavior:'smooth'});
};

// ===== GALERIA =====
function renderGaleria(){
  const galeria=document.getElementById('modal-galeria'),placeholder=document.getElementById('modal-placeholder'),prev=document.getElementById('galeria-prev'),next=document.getElementById('galeria-next'),dots=document.getElementById('galeria-dots'),counter=document.getElementById('galeria-counter');
  galeria.querySelectorAll('.galeria-img').forEach(el=>el.remove());
  if(galeriaFotos.length===0){placeholder.style.display='flex';prev.style.display=next.style.display=counter.style.display='none';dots.innerHTML='';return;}
  placeholder.style.display='none';
  galeriaFotos.forEach((url,i)=>{const img=document.createElement('img');img.src=url;img.className='galeria-img'+(i===galeriaIndex?' ativo':'');img.onerror=function(){this.style.display='none';};galeria.insertBefore(img,prev);});
  if(galeriaFotos.length>1){prev.style.display=next.style.display='flex';counter.style.display='block';counter.textContent=`${galeriaIndex+1} / ${galeriaFotos.length}`;dots.innerHTML=galeriaFotos.map((_,i)=>`<button class="galeria-dot${i===galeriaIndex?' ativo':''}" onclick="galeriaIr(${i})"></button>`).join('');}
  else{prev.style.display=next.style.display=counter.style.display='none';dots.innerHTML='';}
}
window.galeriaNav=function(dir){galeriaIndex=(galeriaIndex+dir+galeriaFotos.length)%galeriaFotos.length;renderGaleria();};
window.galeriaIr=function(i){galeriaIndex=i;renderGaleria();};

// ===== MODAL =====
window.abrirModal=function(id){
  const im=imoveis.find(i=>i.id===id);if(!im)return;
  imovelAtual=im;
  galeriaFotos=Array.isArray(im.fotos)?im.fotos.filter(f=>f):(im.foto?[im.foto]:[]);galeriaIndex=0;renderGaleria();
  document.getElementById('modal-tipo').textContent=im.tipo;
  document.getElementById('modal-preco').textContent=im.preco;
  document.getElementById('modal-titulo').textContent=im.titulo;
  document.getElementById('modal-local').innerHTML='üìç '+im.local;
  document.getElementById('modal-desc').textContent=im.desc||'';
  // v√≠deo
  const videoWrap=document.getElementById('modal-video-wrap');
  const videoEl=document.getElementById('modal-video');
  if(im.video){videoWrap.style.display='block';videoEl.src=im.video;}
  else{videoWrap.style.display='none';videoEl.src='';}
  // tag
  const tagEl=document.getElementById('modal-tag-inline');
  if(im.tag){tagEl.style.display='inline-block';tagEl.className='modal-tag-inline '+im.tag;tagEl.textContent=im.tag==='novo'?'üü¢ Novo':im.tag==='oportunidade'?'üü† Oportunidade':'üü£ Destaque';}
  else{tagEl.style.display='none';}
  document.getElementById('modal-features').innerHTML=[im.quartos>0?`<span>üõè ${im.quartos} Quartos</span>`:'',im.banheiros>0?`<span>üöø ${im.banheiros} Banheiros</span>`:'',im.vagas>0?`<span>üöó ${im.vagas} Vagas</span>`:'',im.area>0?`<span>üìê ${im.area}m¬≤</span>`:'']. join('');
  const wpp=im.wpp||whatsappGlobal,msg=encodeURIComponent(`Ol√°! Vi no cat√°logo e tenho interesse: *${im.titulo}* ‚Äî ${im.preco}. Podemos conversar?`);
  document.getElementById('modal-wpp').href=`https://wa.me/55${wpp}?text=${msg}`;
  document.getElementById('modal').classList.add('open');document.body.style.overflow='hidden';
};
window.fecharModal=function(e){
  if(e&&e.target!==document.getElementById('modal'))return;
  document.getElementById('modal').classList.remove('open');
  document.body.style.overflow='';
  // Parar v√≠deo ao fechar modal
  const v=document.getElementById('modal-video');
  if(v){v.pause();v.currentTime=0;}
};

// ===== COMPARTILHAR =====
window.compartilhar=function(){
  if(!imovelAtual)return;
  const txt=`üè† *${imovelAtual.titulo}*\nüí∞ ${imovelAtual.preco}\nüìç ${imovelAtual.local}\n\nVeja mais im√≥veis: ${window.location.href}`;
  if(navigator.share){navigator.share({title:imovelAtual.titulo,text:txt,url:window.location.href}).catch(()=>{});}
  else{navigator.clipboard.writeText(txt).then(()=>mostrarToast('üìã Link copiado!')).catch(()=>mostrarToast('Use o bot√£o de compartilhar do seu celular'));}
};

// ===== CONTATO =====
window.abrirContato=function(){document.getElementById('contato-overlay').classList.add('open');document.body.style.overflow='hidden';};
window.fecharContato=function(e){if(e&&e.target!==document.getElementById('contato-overlay'))return;document.getElementById('contato-overlay').classList.remove('open');document.body.style.overflow='';};

function atualizarContato(){
  const msg=encodeURIComponent('Ol√°! Gostaria de saber mais sobre seus im√≥veis.');
  const wppLink=`https://wa.me/55${whatsappGlobal}?text=${msg}`;
  document.getElementById('btn-whats-header').href=wppLink;
  document.getElementById('contato-wpp').href=wppLink;
  document.getElementById('contato-wpp-num').textContent=whatsappGlobal?`(${whatsappGlobal.slice(0,2)}) ${whatsappGlobal.slice(2,7)}-${whatsappGlobal.slice(7)}`:'‚Äî';
  if(document.getElementById('wpp-float-link'))document.getElementById('wpp-float-link').href=wppLink;
  if(document.getElementById('wpp-banner-link'))document.getElementById('wpp-banner-link').href=wppLink;
}

// ===== ADMIN =====
window.toggleAdmin=function(){adminAberto=!adminAberto;document.getElementById('admin-bar').classList.toggle('open',adminAberto);document.body.classList.toggle('admin-mode',adminAberto);if(!adminAberto){document.getElementById('admin').classList.remove('open');document.body.style.overflow='';cancelarEdicao();}};
window.abrirFormAdicionar=function(){cancelarEdicao();document.getElementById('admin').classList.add('open');document.body.style.overflow='hidden';};
window.fecharPainelAdmin=function(){document.getElementById('admin').classList.remove('open');document.body.style.overflow='';cancelarEdicao();};
window.adicionarCampoFoto=function(){const lista=document.getElementById('fotos-lista'),div=document.createElement('div');div.className='foto-item';div.innerHTML='<input type="text" placeholder="https://i.imgur.com/exemplo.jpg"><button onclick="removerFoto(this)">‚úï</button>';lista.appendChild(div);};
window.removerFoto=function(btn){const lista=document.getElementById('fotos-lista');if(lista.children.length>1)btn.parentElement.remove();else btn.previousElementSibling.value='';};

function coletarDadosForm(){
  const linksForm=Array.from(document.querySelectorAll('#fotos-lista input')).map(i=>i.value.trim()).filter(v=>v);
  const todasFotos=[...fotosBase64,...linksForm];
  return{titulo:document.getElementById('f-titulo').value.trim(),tipo:document.getElementById('f-tipo').value,preco:document.getElementById('f-preco').value.trim(),local:document.getElementById('f-local').value.trim(),quartos:parseInt(document.getElementById('f-quartos').value)||0,banheiros:parseInt(document.getElementById('f-banheiros').value)||0,vagas:parseInt(document.getElementById('f-vagas').value)||0,area:parseInt(document.getElementById('f-area').value)||0,desc:document.getElementById('f-desc').value.trim(),wpp:document.getElementById('f-wpp').value.trim(),tag:document.getElementById('f-tag').value,fotos:todasFotos,video:videoBase64||''};
}
function limparForm(){['f-titulo','f-preco','f-local','f-quartos','f-banheiros','f-vagas','f-area','f-desc','f-wpp'].forEach(id=>document.getElementById(id).value='');document.getElementById('f-tag').value='';document.getElementById('fotos-lista').innerHTML='<div class="foto-item"><input type="text" placeholder="https://i.imgur.com/exemplo.jpg"><button onclick="removerFoto(this)">‚úï</button></div>';fotosBase64=[];renderPreview();removerVideo();}

window.salvarImovel=async function(){
  const dados=coletarDadosForm();
  if(!dados.titulo||!dados.preco||!dados.local){alert('Preencha pelo menos: t√≠tulo, pre√ßo e localiza√ß√£o.');return;}
  if(dados.wpp){whatsappGlobal=dados.wpp;atualizarContato();}
  const btn=document.getElementById('btn-salvar');btn.disabled=true;btn.textContent='‚è≥ Salvando...';
  try{
    if(modoEdicaoId){await updateDoc(doc(db,"imoveis",modoEdicaoId),{...dados});mostrarToast('‚úè Im√≥vel atualizado!');}
    else{await addDoc(collection(db,"imoveis"),{...dados,criadoEm:Date.now()});mostrarToast('‚úì Im√≥vel adicionado!');}
    await carregarImoveis();fecharPainelAdmin();
  }catch(e){mostrarToast('‚ö† Erro ao salvar. Tente novamente.');}
  btn.disabled=false;btn.textContent=modoEdicaoId?'‚úì Salvar Altera√ß√µes':'‚úì Adicionar ao Cat√°logo';
};

window.editarImovel=function(id){
  const im=imoveis.find(i=>i.id===id);if(!im)return;modoEdicaoId=id;
  document.getElementById('f-titulo').value=im.titulo||'';document.getElementById('f-tipo').value=im.tipo||'Residencial';document.getElementById('f-preco').value=im.preco||'';document.getElementById('f-local').value=im.local||'';document.getElementById('f-quartos').value=im.quartos||'';document.getElementById('f-banheiros').value=im.banheiros||'';document.getElementById('f-vagas').value=im.vagas||'';document.getElementById('f-area').value=im.area||'';document.getElementById('f-desc').value=im.desc||'';document.getElementById('f-wpp').value=im.wpp||'';document.getElementById('f-tag').value=im.tag||'';
  const fotos=Array.isArray(im.fotos)?im.fotos.filter(f=>f):(im.foto?[im.foto]:[]),lista=document.getElementById('fotos-lista');lista.innerHTML='';
  (fotos.length>0?fotos:['']).forEach(url=>{const div=document.createElement('div');div.className='foto-item';div.innerHTML=`<input type="text" value="${url}" placeholder="https://i.imgur.com/exemplo.jpg"><button onclick="removerFoto(this)">‚úï</button>`;lista.appendChild(div);});
  document.getElementById('admin-titulo').textContent='Editar Im√≥vel';document.getElementById('edit-indicator').style.display='block';document.getElementById('btn-salvar').textContent='‚úì Salvar Altera√ß√µes';document.getElementById('btn-cancelar').style.display='block';document.getElementById('admin').classList.add('open');document.body.style.overflow='hidden';
};

window.cancelarEdicao=function(){modoEdicaoId=null;document.getElementById('admin-titulo').textContent='Adicionar Im√≥vel';document.getElementById('edit-indicator').style.display='none';document.getElementById('btn-salvar').textContent='‚úì Adicionar ao Cat√°logo';document.getElementById('btn-cancelar').style.display='none';limparForm();document.getElementById('admin').classList.remove('open');document.body.style.overflow='';};
window.deletarImovel=async function(id){if(!confirm('Deseja excluir este im√≥vel?'))return;try{await deleteDoc(doc(db,"imoveis",id));mostrarToast('üóë Im√≥vel removido.');await carregarImoveis();}catch(e){mostrarToast('‚ö† Erro ao excluir.');}};

function mostrarToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);}

// ===== UPLOAD COM COMPRESS√ÉO AUTOM√ÅTICA =====
let fotosBase64=[];
let videoBase64=null;

window.handleVideo=function(file){
  if(!file)return;
  if(file.size>80*1024*1024){mostrarToast('‚ö† V√≠deo muito grande. Use at√© 80MB.');return;}
  mostrarToast('‚è≥ Carregando v√≠deo...');
  const reader=new FileReader();
  reader.onload=function(e){
    videoBase64=e.target.result;
    document.getElementById('video-preview').src=videoBase64;
    document.getElementById('video-preview-wrap').style.display='block';
    document.getElementById('upload-video-area').style.display='none';
    mostrarToast('‚úì V√≠deo carregado!');
  };
  reader.readAsDataURL(file);
};
window.removerVideo=function(){
  videoBase64=null;
  document.getElementById('video-preview').src='';
  document.getElementById('video-preview-wrap').style.display='none';
  document.getElementById('upload-video-area').style.display='block';
  document.getElementById('input-video').value='';
};

function comprimirImagem(file,maxW=1200,quality=0.75){
  return new Promise(resolve=>{
    const reader=new FileReader();
    reader.onload=e=>{
      const img=new Image();
      img.onload=()=>{
        const canvas=document.createElement('canvas');
        let w=img.width,h=img.height;
        if(w>maxW){h=Math.round(h*maxW/w);w=maxW;}
        canvas.width=w;canvas.height=h;
        canvas.getContext('2d').drawImage(img,0,0,w,h);
        resolve(canvas.toDataURL('image/jpeg',quality));
      };
      img.src=e.target.result;
    };
    reader.readAsDataURL(file);
  });
}

window.handleFiles=async function(files){
  mostrarToast('‚è≥ Comprimindo fotos...');
  for(const file of Array.from(files)){
    if(!file.type.startsWith('image/'))continue;
    const compressed=await comprimirImagem(file);
    fotosBase64.push(compressed);
    renderPreview();
  }
  mostrarToast(`‚úì ${files.length} foto${files.length>1?'s':''} adicionada${files.length>1?'s':''}`);
};

window.handleDrop=function(event){
  event.preventDefault();
  document.getElementById('upload-area').classList.remove('dragover');
  handleFiles(event.dataTransfer.files);
};

function renderPreview(){
  const c=document.getElementById('fotos-preview');
  c.innerHTML=fotosBase64.map((src,i)=>`<div class="preview-item"><img src="${src}" alt="Foto ${i+1}"><button class="preview-remove" onclick="removerPreview(${i})">‚úï</button>${i===0?'<div class="preview-principal">Principal</div>':''}</div>`).join('');
}

window.removerPreview=function(idx){fotosBase64.splice(idx,1);renderPreview();};

// Integrar fotos base64 ao salvar - sobrescreve salvarImovel para incluir fotos do upload
// (a fun√ß√£o original coletarDadosForm j√° lida com fotosBase64 diretamente)

// Limpar preview ao fechar/cancelar ‚Äî extende as fun√ß√µes originais de forma limpa
const _origCancelar=window.cancelarEdicao;
window.cancelarEdicao=function(){fotosBase64=[];videoBase64=null;renderPreview();if(_origCancelar)_origCancelar();};
const _origFechar=window.fecharPainelAdmin;
window.fecharPainelAdmin=function(){fotosBase64=[];videoBase64=null;renderPreview();if(_origFechar)_origFechar();};

// ===== IA ‚Äî PREENCHER FORMUL√ÅRIO =====
window.abrirIAPreencher=function(){
  document.getElementById('ia-panel').style.display='block';
  document.getElementById('ia-texto').value='';
  setTimeout(()=>document.getElementById('ia-texto').focus(),100);
};
window.fecharIAPreencher=function(){
  document.getElementById('ia-panel').style.display='none';
};
window.processarIA=async function(){
  const texto=document.getElementById('ia-texto').value.trim();
  if(!texto){mostrarToast('‚ö† Cole o descritivo antes de processar.');return;}
  const btn=document.getElementById('btn-ia-processar');
  btn.disabled=true;btn.textContent='‚è≥ Processando...';
  try{
    const resp=await fetch('https://api.anthropic.com/v1/messages',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        model:'claude-sonnet-4-20250514',
        max_tokens:1000,
        messages:[{role:'user',content:`Analise este descritivo de im√≥vel e extraia as informa√ß√µes no formato JSON abaixo. Responda APENAS o JSON puro, sem texto adicional, sem markdown, sem backticks.\n\nDescritivo:\n${texto}\n\nFormato JSON exato (use 0 para n√∫meros n√£o informados, string vazia para textos n√£o informados):\n{"titulo":"t√≠tulo comercial atrativo m√°x 60 chars","tipo":"Residencial","preco":"R$ 000.000","local":"bairro cidade","quartos":0,"banheiros":0,"vagas":0,"area":0,"tag":"destaque","desc":"descri√ß√£o comercial atrativa 3-4 linhas"}`}]
      })
    });
    const data=await resp.json();
    const txt=data.content[0].text.trim().replace(/```json|```/g,'');
    const json=JSON.parse(txt);
    if(json.titulo)document.getElementById('f-titulo').value=json.titulo;
    if(json.tipo)document.getElementById('f-tipo').value=json.tipo;
    if(json.preco)document.getElementById('f-preco').value=json.preco;
    if(json.local)document.getElementById('f-local').value=json.local;
    if(json.quartos)document.getElementById('f-quartos').value=json.quartos;
    if(json.banheiros)document.getElementById('f-banheiros').value=json.banheiros;
    if(json.vagas)document.getElementById('f-vagas').value=json.vagas;
    if(json.area)document.getElementById('f-area').value=json.area;
    if(json.tag)document.getElementById('f-tag').value=json.tag;
    if(json.desc)document.getElementById('f-desc').value=json.desc;
    fecharIAPreencher();
    mostrarToast('‚ú® Formul√°rio preenchido! Revise e salve.');
  }catch(e){mostrarToast('‚ö† Erro ao processar. Tente novamente.');}
  btn.disabled=false;btn.textContent='‚ú® Preencher Formul√°rio';
};

// ===== BUSCAR IM√ìVEL (formul√°rio vazio) =====
window.enviarBusca=function(){
  const nome=document.getElementById('bq-nome').value.trim();
  const wpp=document.getElementById('bq-wpp').value.trim();
  const tipo=document.getElementById('bq-tipo').value;
  const quartos=document.getElementById('bq-quartos').value;
  const valor=document.getElementById('bq-valor').value;
  const bairro=document.getElementById('bq-bairro').value.trim();
  if(!nome||!wpp){mostrarToast('‚ö† Preencha pelo menos seu nome e WhatsApp.');return;}
  const msg=`Ol√° Estephan√≠! N√£o encontrei o im√≥vel que busco no seu cat√°logo. Pode me avisar quando tiver? üè†\n\nüîç *O que estou procurando:*\nüë§ Nome: ${nome}\nüì± WhatsApp: ${wpp}\nüè° Tipo: ${tipo||'Qualquer'}\nüõè Quartos: ${quartos||'Qualquer'}\nüí∞ Valor at√©: ${valor||'A combinar'}\nüìç Bairro preferido: ${bairro||'Qualquer'}\n\nAguardo seu contato!`;
  const numero=whatsappGlobal||'62981860902';
  window.open(`https://wa.me/55${numero}?text=${encodeURIComponent(msg)}`,'_blank');
  mostrarToast('‚úì Abrindo WhatsApp...');
};

window.abrirModalBusca=function(){
  document.getElementById('modal-busca').style.display='flex';
  document.body.style.overflow='hidden';
};
window.fecharModalBusca=function(e){
  if(!e||e.target===document.getElementById('modal-busca')){
    document.getElementById('modal-busca').style.display='none';
    document.body.style.overflow='';
  }
};
window.enviarBuscaModal=function(){
  const nome=document.getElementById('mbq-nome').value.trim();
  const wpp=document.getElementById('mbq-wpp').value.trim();
  const tipo=document.getElementById('mbq-tipo').value;
  const quartos=document.getElementById('mbq-quartos').value;
  const valor=document.getElementById('mbq-valor').value;
  const bairro=document.getElementById('mbq-bairro').value.trim();
  if(!nome||!wpp){mostrarToast('‚ö† Preencha pelo menos seu nome e WhatsApp.');return;}
  const msg=`Ol√° Estephan√≠! N√£o encontrei o im√≥vel que busco no seu cat√°logo. Pode me avisar quando tiver? üè†\n\nüîç *O que estou procurando:*\nüë§ Nome: ${nome}\nüì± WhatsApp: ${wpp}\nüè° Tipo: ${tipo||'Qualquer'}\nüõè Quartos: ${quartos||'Qualquer'}\nüí∞ Valor at√©: ${valor||'A combinar'}\nüìç Bairro preferido: ${bairro||'Qualquer'}\n\nAguardo seu contato!`;
  const numero=whatsappGlobal||'62981860902';
  window.open(`https://wa.me/55${numero}?text=${encodeURIComponent(msg)}`,'_blank');
  fecharModalBusca();
  mostrarToast('‚úì Abrindo WhatsApp...');
};

// ===== AN√ÅLISE DE CR√âDITO =====
window.enviarAnalise=function(){
  const nome=document.getElementById('cr-nome').value.trim();
  const wpp=document.getElementById('cr-wpp').value.trim();
  const cpfNum=document.getElementById('cr-cpf-num').value.trim();
  const tipoImovel=document.getElementById('cr-tipo-imovel').value;
  const renda=document.getElementById('cr-renda').value;
  const valor=document.getElementById('cr-valor').value;
  const fgts=document.getElementById('cr-fgts').value;
  const cpf=document.getElementById('cr-cpf').value;
  if(!nome||!wpp||!cpfNum||!renda||!valor){mostrarToast('‚ö† Preencha nome, WhatsApp, CPF, renda e valor.');return;}
  const msg=`Ol√° Estephan√≠! Quero fazer minha an√°lise de cr√©dito gratuita! üè†\n\nüìã *Meus dados:*\nüë§ Nome: ${nome}\nüì± WhatsApp: ${wpp}\nü™™ CPF: ${cpfNum}\nüè° Tipo de im√≥vel: ${tipoImovel||'N√£o informado'}\nüí∞ Renda mensal: ${renda}\nüíµ Valor que busco: ${valor}\nüíº Tenho FGTS: ${fgts||'N√£o informado'}\nüìÑ Restri√ß√£o no CPF: ${cpf||'N√£o informado'}\n\nAguardo seu retorno!`;
  const numero=whatsappGlobal||'62981860902';
  window.open(`https://wa.me/55${numero}?text=${encodeURIComponent(msg)}`,'_blank');
  mostrarToast('‚úì Abrindo WhatsApp...');
};

// ===== INICIALIZAR =====
atualizarBadgeFavs();
carregarImoveis();

</script>
</body>
</html>
